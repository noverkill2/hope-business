<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hope Business - Encontre seu imóvel dos sonhos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #021324 0%, #0a2463 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .popup-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .popup-content {
            background: white;
            padding: 2.5rem;
            border-radius: 1rem;
            width: 90%;
            max-width: 500px;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: none;
        }
        
        .popup-overlay.active .popup-content {
            transform: scale(1);
        }
        
        .funnel-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 2rem;
            background-color: #f8f9fa;
        }
        
        .property-card {
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }
        
        .purpose-option {
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .purpose-option:hover {
            transform: translateY(-3px);
        }
        
        .purpose-option.selected {
            border-color: #3e92cc;
            background-color: #f0f8ff;
        }
        
        .price-option {
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .price-option:hover {
            transform: translateY(-3px);
        }
        
        .price-option.selected {
            border-color: #3e92cc;
            background-color: #f0f8ff;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #3e92cc, #0a2463);
            transition: width 0.3s ease;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #0a2463, #3e92cc);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .footer {
            background-color: #000;
            color: #fff;
            border-top: 1px solid #3e92cc;
        }
        
        .footer a:hover {
            color: #3e92cc;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #0a2463, #3e92cc);
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(90deg, #081b4d, #3277a8);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background-color: #e9ecef;
            color: #0a2463;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background-color: #dee2e6;
        }
        
        .angel-investor-section {
            background: linear-gradient(135deg, #021324 0%, #0a2463 100%);
            color: white;
        }
        
        .house-icon {
            width: 40px;
            height: 40px;
            display: inline-block;
            position: relative;
        }
        
        .house-icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 10px;
            width: 20px;
            height: 15px;
            background-color: #3e92cc;
            border-radius: 2px 2px 0 0;
        }
        
        .house-icon::after {
            content: "";
            position: absolute;
            top: 5px;
            left: 0;
            width: 40px;
            height: 20px;
            background-color: #3e92cc;
            border-radius: 2px;
        }
        
        .house-icon .door {
            position: absolute;
            bottom: 0;
            left: 15px;
            width: 10px;
            height: 10px;
            background-color: #0a2463;
            border-radius: 0 0 2px 0;
        }

        /* Estilos atualizados para a seção do Investidor Anjo */
        .angel-popup {
            background: white;
            border-radius: 1rem;
            padding: 2.5rem;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: none;
        }

        .angel-title {
            background: linear-gradient(90deg, #0a2463, #3e92cc);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .angel-subtitle {
            color: #3e92cc;
        }

        .angel-text {
            color: #4a5568;
        }

        .angel-icon {
            color: #3e92cc;
        }
        
        /* Estilos atualizados para o popup de boas-vindas */
        .welcome-icon {
            color: #3e92cc;
        }
        
        .welcome-title {
            color: #0a2463;
            font-weight: bold;
        }
        
        .welcome-text {
            color: #4a5568;
        }
        
        .welcome-select {
            border: 1px solid #e2e8f0;
            color: #4a5568;
        }
        
        .welcome-select:focus {
            border-color: #3e92cc;
            ring-color: #3e92cc;
        }
        
        .welcome-btn {
            background: linear-gradient(90deg, #0a2463, #3e92cc);
            color: white;
        }
        
        .welcome-btn:hover {
            background: linear-gradient(90deg, #081b4d, #3277a8);
        }

        /* Estilos para o formulário do investidor anjo */
        .angel-form-label {
            color: #4a5568;
            font-weight: 500;
        }

        .angel-form-input {
            border: 1px solid #e2e8f0;
            color: #4a5568;
        }

        .angel-form-input:focus {
            border-color: #3e92cc;
            ring-color: #3e92cc;
        }
    </style>
</head>
<body class="font-sans bg-white">
    <!-- Popup inicial (atualizado) -->
    <div class="popup-overlay active" id="cityPopup">
        <div class="popup-content">
            <div class="text-center mb-6">
                <div class="welcome-icon mb-4">
                    <svg width="80" height="80" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                        <path d="M100 20 L40 70 L100 180 L160 70 Z" fill="none" stroke="#3e92cc" stroke-width="10"/>
                        <path d="M40 70 H160" stroke="#3e92cc" stroke-width="10"/>
                        <path d="M100 20 V180" stroke="#3e92cc" stroke-width="10"/>
                    </svg>
                </div>
                <h2 class="text-2xl font-bold mb-2 welcome-title">Bem-vindo à Hope Business</h2>
                <p class="welcome-text">Para encontrarmos os melhores imóveis para você, precisamos saber em qual cidade você deseja morar.</p>
            </div>
            
            <form id="cityForm" class="space-y-4">
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700 mb-1">Cidade</label>
                    <div class="relative">
                        <select id="city" name="city" class="w-full px-4 py-3 rounded-lg bg-white welcome-select border focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="" disabled selected>Selecione a cidade</option>
                            <option value="itapoá">Itapoá</option>
                            <option value="são fancisco do sul">São Francisco do Sul</option>
                            <option value="curitiba">Curitiba</option>
                            <option value="cascavel">Cascavel</option>
                            <option value="londrina">Londrina</option>
                            <option value="maringá">Maringá</option>
                            <option value="recife">Recife</option>
                            <option value="joinville">Joinville</option>
                            <option value="balneario-barra-do-sul">Balneário Barra do Sul</option>
                            <option value="barra-velha">Barra Velha</option>
                            <option value="penha">Penha</option>
                            <option value="navegantes">Navegantes</option>
                            <option value="itajai">Itajaí</option>
                            <option value="balneario-camboriu">Balneario Camboriú</option>
                            <option value="camboriu">Camboriú</option>
                            <option value="itapema">Itapema</option>
                            <option value="porto-belo">Porto Belo</option>
                            <option value="bombinhas">Bombinhas</option>
                            <option value="tijucas">Tijucas</option>
                            <option value="gov-celso-ramos">Gov. Celso Ramos</option>
                            <option value="armacao">Armação</option>
                            <option value="biguacu">Biguaçu</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="w-full welcome-btn font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center shadow-md">
                    <span>Continuar</span>
                </button>
            </form>
        </div>
    </div>
    
    <!-- Funil de vendas (inicialmente oculto) -->
    <div class="hidden" id="funnelContainer">
        <!-- Barra de progresso -->
        <div class="fixed top-0 left-0 right-0 z-50 bg-white shadow-sm">
            <div class="progress-bar">
                <div class="progress" id="progressBar" style="width: 20%"></div>
            </div>
        </div>
        
        <!-- Seção 1: Finalidade do imóvel -->
        <section class="funnel-section" id="step1">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6"><span class="gradient-text">Qual a finalidade</span> do imóvel que você busca?</h1>
                <p class="text-gray-700 mb-10">Selecione abaixo a opção que melhor descreve seu objetivo</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto">
                    <div class="purpose-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-transparent hover:border-blue-500 transition" data-value="moradia">
                        <div class="text-blue-600 mb-4">
                            <div class="house-icon mx-auto">
                                <div class="door"></div>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Moradia</h3>
                        <p class="text-gray-600">Estou buscando um lugar para viver com minha família</p>
                    </div>
                    
                    <div class="purpose-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-transparent hover:border-blue-500 transition" data-value="investimento">
                        <div class="text-blue-600 mb-4">
                            <i class="fas fa-chart-line text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Investimento</h3>
                        <p class="text-gray-600">Quero adquirir um imóvel para valorização ou renda</p>
                    </div>
                </div>
                
                <div class="mt-10">
                    <button type="button" class="btn-primary font-bold py-3 px-8 rounded-full" id="nextStep1Button">
                        Próximo passo <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Seção 2: Tipo de imóvel -->
        <section class="funnel-section hidden" id="step2">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6"><span class="gradient-text">Qual tipo de imóvel</span> você está buscando?</h1>
                <p class="text-gray-700 mb-10">Selecione abaixo a opção que melhor atende suas necessidades</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="property-card bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-transparent hover:border-blue-500 transition" data-value="apartamento">
                        <div class="text-blue-600 mb-4">
                            <i class="fas fa-building text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Apartamento</h3>
                        <p class="text-gray-600">Ótimo para quem busca segurança comodidade</p>
                    </div>
                    
                    <div class="property-card bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-transparent hover:border-blue-500 transition" data-value="casa">
                        <div class="text-blue-600 mb-4">
                            <i class="fas fa-home text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Casa</h3>
                        <p class="text-gray-600">Ideal para quem deseja mais espaço e privacidade</p>
                    </div>
                    
                    <div class="property-card bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-transparent hover:border-blue-500 transition" data-value="terreno">
                        <div class="text-blue-600 mb-4">
                            <i class="fas fa-vector-square text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Terreno</h3>
                        <p class="text-gray-600">Perfeito para construir seu imóvel do zero</p>
                    </div>
                </div>
                
                <div class="mt-10 flex justify-center space-x-4">
                    <button type="button" class="btn-secondary font-bold py-3 px-8 rounded-full" id="backStep2Button">
                        <i class="fas fa-arrow-left mr-2"></i> Voltar
                    </button>
                    <button type="button" class="btn-primary font-bold py-3 px-8 rounded-full" id="nextStep2Button">
                        Próximo passo <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Seção 3: Faixa de preço (atualizada) -->
        <section class="funnel-section hidden" id="step3">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6"><span class="gradient-text">Qual faixa de preço</span> você está considerando?</h1>
                <p class="text-gray-700 mb-10">Selecione o intervalo que melhor se encaixa no seu orçamento</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto">
                    <div class="price-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition" data-value="700000-2000000">
                        <div class="text-blue-600 mb-3">
                            <i class="fas fa-money-bill-wave text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-1 text-gray-800">R$ 500 mil - R$ 1.2 milhões</h3>
                        <p class="text-gray-600 text-sm">Imóveis de médio padrão</p>
                    </div>
                    
                    <div class="price-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition" data-value="2000000-8000000">
                        <div class="text-blue-600 mb-3">
                            <i class="fas fa-gem text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-1 text-gray-800">R$ 1.2 milhões - R$ 3 milhões</h3>
                        <p class="text-gray-600 text-sm">Imóveis de alto padrão</p>
                    </div>
                    
                    <div class="price-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition" data-value="8000000-30000000">
                        <div class="text-blue-600 mb-3">
                            <i class="fas fa-crown text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-1 text-gray-800">R$ 3 milhões - R$ 5 milhões</h3>
                        <p class="text-gray-600 text-sm">Imóveis de luxo</p>
                    </div>
                    
                    <div class="price-option bg-white rounded-xl p-6 shadow-md cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition" data-value="custom" id="customPriceOption">
                        <div class="text-blue-600 mb-3">
                            <i class="fas fa-search-dollar text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-1 text-gray-800">Valor personalizado</h3>
                        <p class="text-gray-600 text-sm">Tenho um orçamento específico</p>
                    </div>
                </div>
                
                <!-- Campo para valor personalizado (inicialmente oculto) -->
                <div id="customPriceContainer" class="hidden mt-6 max-w-md mx-auto">
                    <div class="bg-white rounded-xl p-6 shadow-md">
                        <div class="text-left mb-4">
                            <label for="customPrice" class="block text-sm font-medium text-gray-700 mb-1">Informe o valor desejado (R$)</label>
                            <input type="number" id="customPrice" name="customPrice" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: 5000000">
                        </div>
                    </div>
                </div>
                
                <div class="mt-10 flex justify-center space-x-4">
                    <button type="button" class="btn-secondary font-bold py-3 px-8 rounded-full" id="backStep3Button">
                        <i class="fas fa-arrow-left mr-2"></i> Voltar
                    </button>
                    <button type="button" class="btn-primary font-bold py-3 px-8 rounded-full" id="nextStep3Button">
                        Próximo passo <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Seção 4: Contato -->
        <section class="funnel-section hidden" id="step4">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6"><span class="gradient-text">Quase lá!</span> Precisamos do seu contato</h1>
                <p class="text-gray-700 mb-10">Um consultor especializado entrará em contato con as melhores opções</p>
                
                <div class="bg-white rounded-xl p-8 shadow-md max-w-md mx-auto border border-gray-100">
                    <form id="contactForm" class="space-y-4">
                        <div class="text-left">
                            <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nome completo</label>
                            <input type="text" id="name" name="name" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        
                        <div class="text-left">
                            <label for="email" class="block text-sm font-medium text-gray-7 mb-1">E-mail</label>
                            <input type="email" id="email" name="email" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        
                        <div class="text-left">
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                            <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" class="btn-primary w-full font-bold py-3 px-4 rounded-lg">
                                Enviar informações <i class="fas fa-paper-plane ml-2"></i>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="mt-6">
                    <button type="button" class="btn-secondary font-bold py-3 px-8 rounded-full" id="backStep4Button">
                        <i class="fas fa-arrow-left mr-2"></i> Voltar
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Seção 5: Obrigado -->
        <section class="funnel-section hidden" id="step5">
            <div class="max-w-4xl mx-auto text-center">
                <div class="bg-white rounded-xl p-8 shadow-md max-w-md mx-auto border border-gray-100">
                    <div class="text-green-500 mb-6">
                        <i class="fas fa-check-circle text-6xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-4"><span class="gradient-text">Obrigado!</span></h1>
                    <p class="text-gray-700 mb-6">Seu cadastro foi realizado com sucesso. Um consultor da Hope Business entrará em contato em breve com as melhores opções de imóveis para você.</p>
                    <p class="text-gray-700 mb-8">Enquanto isso, que tal dar uma olhada em nossas <a href="#" class="text-blue-600 hover:underline">ofertas exclusivas</a>?</p>
                    
                    <div class="flex justify-center space-x-4">
                        <a href="#" class="btn-primary font-bold py-3 px-6 rounded-full">
                            <i class="fas fa-home mr-2"></i> Ver imóveis
                        </a>
                        <a href="#" class="btn-secondary font-bold py-3 px-6 rounded-full">
                            <i class="fas fa-phone mr-2"></i> Fale conosco
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Seção 6: Investidor Anjo (atualizada com formulário) -->
        <section class="angel-investor-section hidden" id="angelInvestor">
            <div class="max-w-4xl mx-auto text-center flex items-center justify-center min-h-screen">
                <div class="angel-popup">
                    <div class="angel-icon mb-6">
                        <i class="fas fa-star text-5xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold mb-4 angel-title">Seus valores não encaixam naqueles padrões?</h1>
                    <h2 class="text-2xl font-bold mb-6 angel-subtitle">Então você é um Investidor Anjo!</h2>
                    
                    <p class="angel-text mb-6 text-lg">
                        Parabéns! Você está no seleto grupo de investidores que buscam oportunidades exclusivas e diferenciadas no mercado imobiliário.
                    </p>
                    
                    <p class="angel-text mb-8 text-lg">
                        Preencha seus dados abaixo e nossos corretores especializados entrarão em contato em breve.
                    </p>
                    
                    <!-- Formulário do Investidor Anjo -->
                    <div class="bg-white rounded-xl p-6 shadow-md border border-gray-100">
                        <form id="angelInvestorForm" class="space-y-4">
                            <div class="text-left">
                                <label for="angelName" class="block text-sm font-medium angel-form-label mb-1">Nome completo</label>
                                <input type="text" id="angelName" name="angelName" class="w-full px-4 py-3 rounded-lg angel-form-input focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            
                            <div class="text-left">
                                <label for="angelEmail" class="block text-sm font-medium angel-form-label mb-1">E-mail</label>
                                <input type="email" id="angelEmail" name="angelEmail" class="w-full px-4 py-3 rounded-lg angel-form-input focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            
                            <div class="text-left">
                                <label for="angelPhone" class="block text-sm font-medium angel-form-label mb-1">Telefone</label>
                                <input type="tel" id="angelPhone" name="angelPhone" class="w-full px-4 py-3 rounded-lg angel-form-input focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            
                            <div class="text-left">
                                <label for="angelBudget" class="block text-sm font-medium angel-form-label mb-1">Valor de investimento (R$)</label>
                                <input type="number" id="angelBudget" name="angelBudget" class="w-full px-4 py-3 rounded-lg angel-form-input focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            
                            <div class="pt-4">
                                <button type="submit" class="btn-primary w-full font-bold py-3 px-4 rounded-lg">
                                    Enviar dados <i class="fas fa-paper-plane ml-2"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="mt-6">
                        <button type="button" id="backAngelButton" class="btn-secondary font-bold py-3 px-6 rounded-full inline-flex items-center justify-center">
                            <i class="fas fa-arrow-left mr-2"></i> Voltar
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Rodapé -->
        <footer class="footer py-8 px-4 text-center">
            <div class="max-w-6xl mx-auto">
                <div class="flex justify-center space-x-6 mb-6">
                    <a href="#" class="text-white hover:text-blue-300"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-white hover:text-blue-300"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-white hover:text-blue-300"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="text-white hover:text-blue-300"><i class="fab fa-whatsapp"></i></a>
                </div>
                <p class="text-sm text-gray-400 mb-4">
                    Hope Business © 2025. Todos os direitos reservados.
                </p>
                <div class="text-xs text-gray-500">
                    <a href="#" class="hover:text-blue-300">Política de Privacidade</a> | 
                    <a href="#" class="hover:text-blue-300">Termos de Uso</a> | 
                    <a href="#" class="hover:text-blue-300">Contato</a>
                </div>
            </div>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // URL do Google Apps Script para envio dos dados
            const scriptURL = 'https://script.google.com/macros/s/AKfycbzJvo9ysoWaJL5dFvy4qrMHlnVRX94ylfHHDrg--U7U3PuN0iDwmjsV64wS4VSWOTHdzw/exec';
            
            // ====== Estado global ======
            let selectedPurpose = '';
            let selectedPropertyType = '';
            let selectedPriceRange = '';
            let customPrice = '';
            let userCity = '';

            // 1) Popup de cidade
            document.getElementById('cityForm').addEventListener('submit', e => {
                e.preventDefault();
                userCity = document.getElementById('city').value;
                if (!userCity) {
                    alert('Por favor, selecione uma cidade');
                    return;
                }
                document.getElementById('cityPopup').classList.remove('active');
                setTimeout(() => {
                    document.getElementById('funnelContainer').classList.remove('hidden');
                }, 300);
            });

            // 2) Navegação do funil
            function nextStep(cur, nxt) {
                if (cur === 'step1' && !selectedPurpose) {
                    alert('Por favor, selecione a finalidade do imóvel');
                    return;
                }
                if (cur === 'step2' && !selectedPropertyType) {
                    alert('Por favor, selecione o tipo de imóvel');
                    return;
                }
                if (cur === 'step3') {
                    const valor = document.getElementById('customPrice')?.value;
                    if (!selectedPriceRange && !valor) {
                        alert('Por favor, selecione uma faixa de preço ou informe um valor');
                        return;
                    }
                    if (selectedPriceRange === 'custom') {
                        customPrice = valor;
                        if (parseFloat(valor) > 5000000) {
                            showAngelInvestorPage();
                            return;
                        }
                    }
                }
                document.getElementById(cur).classList.add('hidden');
                document.getElementById(nxt).classList.remove('hidden');
                updateProgressBar(nxt);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function prevStep(cur, prv) {
                document.getElementById(cur).classList.add('hidden');
                document.getElementById(prv).classList.remove('hidden');
                updateProgressBar(prv);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function updateProgressBar(step) {
                const pct = { step1: 20, step2: 40, step3: 60, step4: 80, step5: 100 }[step] || 20;
                document.getElementById('progressBar').style.width = pct + '%';
            }

            function showAngelInvestorPage() {
                document.querySelectorAll('.funnel-section').forEach(s => s.classList.add('hidden'));
                document.getElementById('angelInvestor').classList.remove('hidden');
                document.querySelector('.progress-bar').classList.add('hidden');
            }

            // 3) Seletor de opções
            document.querySelectorAll('.purpose-option').forEach(el => {
                el.addEventListener('click', () => {
                    document.querySelectorAll('.purpose-option').forEach(o => {
                        o.classList.remove('selected', 'border-blue-500');
                    });
                    el.classList.add('selected', 'border-blue-500');
                    selectedPurpose = el.dataset.value;
                });
            });

            document.querySelectorAll('.property-card').forEach(el => {
                el.addEventListener('click', () => {
                    document.querySelectorAll('.property-card').forEach(o => {
                        o.classList.remove('border-blue-500');
                    });
                    el.classList.add('border-blue-500');
                    selectedPropertyType = el.dataset.value;
                });
            });

            document.querySelectorAll('.price-option').forEach(el => {
                el.addEventListener('click', () => {
                    document.querySelectorAll('.price-option').forEach(o => {
                        o.classList.remove('selected', 'border-blue-500');
                    });
                    el.classList.add('selected', 'border-blue-500');
                    selectedPriceRange = el.dataset.value;
                    document.getElementById('customPriceContainer').classList.toggle('hidden', selectedPriceRange !== 'custom');
                });
            });

            // 4) Botões de navegação
            document.getElementById('nextStep1Button').addEventListener('click', () => {
                if (!selectedPurpose) {
                    alert('Por favor, selecione a finalidade do imóvel');
                    return;
                }
                nextStep('step1', 'step2');
            });

            document.getElementById('nextStep2Button').addEventListener('click', () => {
                if (!selectedPropertyType) {
                    alert('Por favor, selecione o tipo de imóvel');
                    return;
                }
                nextStep('step2', 'step3');
            });

            document.getElementById('nextStep3Button').addEventListener('click', () => {
                const valor = document.getElementById('customPrice')?.value;
                if (!selectedPriceRange && !valor) {
                    alert('Por favor, selecione uma faixa de preço ou informe um valor');
                    return;
                }
                if (selectedPriceRange === 'custom') {
                    customPrice = valor;
                    if (parseFloat(valor) > 5000000) {
                        showAngelInvestorPage();
                        return;
                    }
                }
                nextStep('step3', 'step4');
            });

            // Botões de voltar
            document.getElementById('backStep2Button').addEventListener('click', () => {
                prevStep('step2', 'step1');
            });

            document.getElementById('backStep3Button').addEventListener('click', () => {
                prevStep('step3', 'step2');
            });

            document.getElementById('backStep4Button').addEventListener('click', () => {
                prevStep('step4', 'step3');
            });

            document.getElementById('backAngelButton').addEventListener('click', () => {
                document.getElementById('angelInvestor').classList.add('hidden');
                document.getElementById('step3').classList.remove('hidden');
                document.querySelector('.progress-bar').classList.remove('hidden');
                updateProgressBar('step3');
            });

            // 5) Envio do formulário principal (atualizado com CORS)
            document.getElementById('contactForm').addEventListener('submit', e => {
                e.preventDefault();
                
                const payload = {
                    name: document.getElementById('name').value,
                    city: userCity,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    purpose: selectedPurpose,
                    propertyType: selectedPropertyType,
                    priceRange: selectedPriceRange,
                    customPrice: customPrice,
                    timestamp: new Date().toISOString()
                };
                
                // Envia para o Google Sheets com CORS habilitado
                fetch(scriptURL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(payload)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro na rede');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Sucesso:', data);
                    nextStep('step4', 'step5');
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Ocorreu um erro ao enviar seus dados. Por favor, tente novamente.');
                });
            });

            // 6) Envio do formulário do investidor anjo (atualizado com CORS)
            document.getElementById('angelInvestorForm').addEventListener('submit', e => {
                e.preventDefault();
                
                const angelPayload = {
                    name: document.getElementById('angelName').value,
                    email: document.getElementById('angelEmail').value,
                    phone: document.getElementById('angelPhone').value,
                    customPrice: document.getElementById('angelBudget').value,
                    type: 'investidor_anjo',
                    city: userCity,
                    timestamp: new Date().toISOString()
                };
                
                // Envia para o Google Sheets com CORS habilitado
                fetch(scriptURL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(angelPayload)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro na rede');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Sucesso:', data);
                    document.getElementById('angelInvestor').classList.add('hidden');
                    document.getElementById('step5').classList.remove('hidden');
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Ocorreu um erro ao enviar seus dados. Por favor, tente novamente.');
                });
            });
        });
    </script>
</body>
</html>
